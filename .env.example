# =============================================================================
# AI-Powered GitHub PR Reviewer - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values
# NEVER commit your .env file to version control

# -----------------------------------------------------------------------------
# GitHub App Configuration
# -----------------------------------------------------------------------------
# Your GitHub App ID (found in your GitHub App settings)
GITHUB_APP_ID=123456

# Path to your GitHub App private key file (.pem)
# Download from GitHub App settings -> Private keys
GITHUB_PRIVATE_KEY_PATH=./private-key.pem

# OR provide the private key directly (for containerized deployments)
# Use the full PEM content including headers
# GITHUB_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\n...\n-----END RSA PRIVATE KEY-----"

# Webhook secret for signature verification (set in GitHub App webhook settings)
GITHUB_WEBHOOK_SECRET=your_webhook_secret_here

# -----------------------------------------------------------------------------
# OpenAI Configuration
# -----------------------------------------------------------------------------
# Your OpenAI API key
OPENAI_API_KEY=sk-your-openai-api-key-here

# Model to use for code review (default: gpt-4-turbo-preview)
OPENAI_MODEL=gpt-4-turbo-preview

# Maximum tokens for AI response
OPENAI_MAX_TOKENS=4096

# Temperature for AI responses (0.0 - 1.0, lower = more deterministic)
OPENAI_TEMPERATURE=0.3

# -----------------------------------------------------------------------------
# PR Processing Limits
# -----------------------------------------------------------------------------
# Maximum number of files to process per PR (prevents timeout on huge PRs)
MAX_PR_FILES=50

# Maximum number of diff lines per file (skip huge files)
MAX_DIFF_LINES=500

# Maximum total diff lines for entire PR
MAX_TOTAL_DIFF_LINES=3000

# Maximum file size in bytes to process
MAX_FILE_SIZE_BYTES=100000

# File extensions to skip (comma-separated)
SKIP_FILE_EXTENSIONS=.min.js,.min.css,.lock,.sum,.map

# Paths to skip (comma-separated, supports glob patterns)
SKIP_PATHS=vendor/,node_modules/,dist/,build/,__pycache__/

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# GitHub API rate limit (requests per hour)
GITHUB_RATE_LIMIT=5000

# OpenAI API rate limit (requests per minute)
OPENAI_RATE_LIMIT_RPM=60

# -----------------------------------------------------------------------------
# Retry Configuration
# -----------------------------------------------------------------------------
# Maximum retry attempts for API calls
MAX_RETRIES=3

# Base delay between retries (seconds)
RETRY_BASE_DELAY=1.0

# Maximum delay between retries (seconds)
RETRY_MAX_DELAY=60.0

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
# Host to bind the server to
HOST=0.0.0.0

# Port to bind the server to
PORT=8000

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Enable JSON logging format (recommended for production)
LOG_JSON_FORMAT=true

# Enable request/response logging (caution: may log sensitive data)
LOG_REQUESTS=false

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
# Enable posting comments to GitHub (set to false for dry-run testing)
ENABLE_GITHUB_COMMENTS=true

# Enable summary comment on PR
ENABLE_SUMMARY_COMMENT=true

# Enable inline comments on specific lines
ENABLE_INLINE_COMMENTS=true

# Minimum severity to post as inline comment: low, medium, high
MIN_INLINE_SEVERITY=low
